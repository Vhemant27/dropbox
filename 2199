// Select the modal and its interactive elements
const modal = document.querySelector('.modal');
const modalFocusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');

// Trap focus within the modal
modal.addEventListener('keydown', function(event) {
  if (event.key === 'Tab') {
    // Get the currently focused element
    const focusedElementIndex = Array.from(modalFocusableElements).indexOf(document.activeElement);

    if (event.shiftKey) { // Shift+Tab
      // If the first focusable element is focused, move focus to the last element
      if (focusedElementIndex === 0) {
        modalFocusableElements[modalFocusableElements.length - 1].focus();
        event.preventDefault();
      }
    } else { // Tab
      // If the last focusable element is focused, move focus to the first element
      if (focusedElementIndex === modalFocusableElements.length - 1) {
        modalFocusableElements[0].focus();
        event.preventDefault();
      }
    }
  }
});
